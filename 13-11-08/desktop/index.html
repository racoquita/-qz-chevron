<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1, maximum-scale=1">
	<title>Chevron Quartz Desktop</title>
	<link rel="stylesheet" media="all" href="css/style.css"/>
</head>
<body>
	<script type="text/javascript" src="http://ds.serving-sys.com/BurstingScript/EBLoader.js"></script>
	<script type="text/javascript" src="http://ads.qz.com/sponsors/chevron/13-11-08/desktop/js/behavior.js"></script>
	<script type="text/javascript" src="http://ads.qz.com/sponsors/chevron/13-11-08/desktop/js/rich_banner.js"></script>
	<script src="http://ads.qz.com/sponsors/chevron/13-11-08/desktop/js/minified/TweenLite.min.js"></script>
	<script src="http://ads.qz.com/sponsors/chevron/13-11-08/desktop/js/minified/easing/EasePack.min.js"></script>
	<script src="http://ads.qz.com/sponsors/chevron/13-11-08/desktop/js/minified/plugins/CSSPlugin.min.js"></script>
	
	<div id="qzad">
		<div id="base-port">
			<div id="container">
				<div id="logo"></div>
				<div id="slide">
					<div id = "slide1">
						<div id="txt1"></div>
						<div id="txt1b"></div>
					</div>
					<div id = "slide2">
						<div id="txt2"></div>
						<div id="txt2b"></div>
						<div id="f2lines"></div>
						<div id="f2bigman"></div>
						<div id="f2smallman1"></div>
						<div id="f2smallman2"></div>
						<div id="f2smallman3"></div>
					</div>
					<div id = "slide3">
						<div id="txt3"></div>
						<div id="f3map"></div>
						<div id="f3circle"></div>
						<div id="f3lines"></div>
						<div id="f3people"></div>
					</div>
					<div id = "slide4">
						<div id="txt4"></div>
						<div id="txt4b"></div>
						<div id="f4bar1"></div>
						<div id="f4bar2"></div>
						<div id="f42012"></div>
						<div id="f42020"></div>
						<div id="f4bartxt1"></div>
						<div id="f4bartxt2"></div>
						<div id="f4circle"></div>
					</div>
					<div id = "slide5">
						<div id="txt5"></div>
						<div id="txt5b"></div>
					</div>
				</div>

				<div id="nav"></div>
				<div id="paperBg">
					<a href="javascript:bkndClicked();" class="fill-div"></a>
				</div>
				<div id="clickBg">
					<a href="javascript:bkndClicked();" class="fill-div"></a>
				</div>
				<div id="reddot"></div>
				<div id="rarrow">
					<a href="javascript:rightClicked();" class="fill-div"></a>
				</div>
				<div id="larrow">
					<a href="javascript:leftClicked();" class="fill-div"></a>
				</div>
				<div id="bubble1"></div>
				<div id="bubble2"></div>
				<div id="bubble3"></div>
				<div id="infobtn" onmouseover="infoRolled();" onmouseout="infoOff();"></div>
				<div id="ctaarrow"></div>
				<div id="cta" onmouseover="ctaRolled();" onmouseout="ctaOff();">
					<a href="javascript:ctaClicked();" class="fill-div"></a>
				</div>
			</div>
		</div>
	</div>
	
	<script type="text/javascript">
		var slideSettled = true;
		var spd1 = .35;
		var slidePos = 0;
		var leftPos = -150;
		var rightPos = 1250;
		var startPt = -3;
		var frame2Done = false;
		var frame3Done = false;
		var frame4Done = false;
		var frame5Done = false;
	
		!EB.isInitialized() ? EB.addEventListener(EBG.EventName.EB_INITIALIZED, onInit) : onInit();
	   
		function infoRolled(){
			if(slidePos==1){ TweenLite.set(bubble1, {visibility:'visible'}); }
			if(slidePos==2){ TweenLite.set(bubble2, {visibility:'visible'}); }
			if(slidePos==3){ TweenLite.set(bubble3, {visibility:'visible'}); }
		}
		function infoOff(){
			if(slidePos==1){ TweenLite.set(bubble1, {visibility:'hidden'}); }
			if(slidePos==2){ TweenLite.set(bubble2, {visibility:'hidden'}); }
			if(slidePos==3){ TweenLite.set(bubble3, {visibility:'hidden'}); }
		}
		function ctaRolled(){
			TweenLite.to(ctaarrow, .3, {left:326});
		}
		function ctaOff(){
			TweenLite.to(ctaarrow, .3, {left:320});
		}
		function onInit(){
			var t1 = document.getElementById("txt1");
			var t1b = document.getElementById("txt1b");
			TweenLite.set(t1, {scaleX:3, scaleY:3, opacity:0});
			TweenLite.set(t1b, {scaleX:3, scaleY:3, opacity:0});
			animateIn();
		}
		function animateIn() {
			var t1 = document.getElementById("txt1");
			var t1b = document.getElementById("txt1b");
			TweenLite.to(t1, .4, {opacity:1, scaleX:1, scaleY:1, ease:Cubic.easeIn});
			TweenLite.to(t1b, .4, {delay:.2, opacity:1, scaleX:1, scaleY:1, ease:Cubic.easeIn});
		}
		function moveRight(){
			var larrow = document.getElementById("larrow");
			var rarrow = document.getElementById("rarrow");
			var slide = document.getElementById("slide");
			
			if(slidePos < 4 && slideSettled){	
					TweenLite.set(larrow, {visibility:'visible'});
					slidePos++;
					checkAnimation();
					moveSlide();
			}
			if(slidePos == 4) {
				TweenLite.set(rarrow, {visibility:'hidden'});
			}
		}
		function moveLeft(){
			var larrow = document.getElementById("larrow");
			var rarrow = document.getElementById("rarrow");
			var slide = document.getElementById("slide");
			
			if(slidePos > 0 && slideSettled){
				TweenLite.set(rarrow, {visibility:'visible'});
				slidePos--;
				checkAnimation();
				moveSlide();
			}
			if(slidePos == 0){
				TweenLite.set(larrow, {visibility:'hidden'});
			}
		}
		function moveSlide(){
			var slide = document.getElementById("slide");
			var slidenum = -1200 * slidePos;
			TweenLite.to(slide, .4, {x:slidenum, ease:Cubic.easeIn});
		}
		function checkAnimation(){
			if(slidePos==0){
				TweenLite.set(infobtn, {visibility:'hidden'});
				TweenLite.set(reddot, {left:303});
			}
			if(slidePos==1){
				TweenLite.set(reddot, {left:321});
				TweenLite.set(infobtn, {visibility:'visible'});
				if(!frame2Done){
					frame2Done = true;
					var f2bigman = document.getElementById("f2bigman");
					TweenLite.set(f2bigman, {scaleX:0, scaleY:0, opacity:0});
					TweenLite.set(f2smallman1, {scaleX:0, scaleY:0, opacity:0});
					TweenLite.set(f2smallman2, {scaleX:0, scaleY:0, opacity:0});
					TweenLite.set(f2smallman3, {scaleX:0, scaleY:0, opacity:0});
					TweenLite.set(f2lines, {scaleX:0, scaleY:0, opacity:0});
					TweenLite.to(f2bigman, .4, {delay:.4, scaleX:1, scaleY:1, opacity:1, ease:Cubic.easeIn});
					TweenLite.to(f2lines, .4, {delay:.6, scaleX:1, scaleY:1, opacity:1, ease:Cubic.easeIn});
					TweenLite.to(f2smallman1, .4, {delay:.8, scaleX:1, scaleY:1, opacity:1, ease:Cubic.easeIn});
					TweenLite.to(f2smallman2, .4, {delay:1, scaleX:1, scaleY:1, opacity:1, ease:Cubic.easeIn});
					TweenLite.to(f2smallman3, .4, {delay:1.2, scaleX:1, scaleY:1, opacity:1, ease:Cubic.easeIn});
				}
			}
			if(slidePos==2){
				TweenLite.set(infobtn, {visibility:'visible'});
				TweenLite.set(reddot, {left:338});
				if(!frame3Done){
					frame3Done = true;
					TweenLite.set(f3people, {scaleX:0, scaleY:0, opacity:0});
					TweenLite.set(f3lines, {scaleX:0, scaleY:0, opacity:0, transformOrigin:"left 100px"});
					TweenLite.to(f3lines, .6, {delay:.4, scaleX:1, scaleY:1, opacity:1, ease:Cubic.easeIn});
					TweenLite.to(f3people, .6, {delay:.8, scaleX:1, scaleY:1, opacity:1, ease:Cubic.easeIn});
				}
			}
			if(slidePos==3){
				TweenLite.set(infobtn, {visibility:'visible'});
				TweenLite.set(reddot, {left:355});
				TweenLite.set(cta, {visibility:'hidden'});
				TweenLite.set(ctaarrow, {visibility:'hidden'});
				if(!frame4Done){
					frame4Done = true;
					TweenLite.set(f4bartxt1, {opacity:0});
					TweenLite.set(f4bartxt2, {opacity:0});
					TweenLite.set(f4bar1, {scaleX:0, opacity:0, transformOrigin:"left 540px"});
					TweenLite.set(f4bar2, {scaleX:0, opacity:0, transformOrigin:"left 540px"});
					TweenLite.to(f4bar1, .5, {delay:.4, scaleX:1, opacity:1, ease:Cubic.easeIn});
					TweenLite.to(f4bar2, .5, {delay:.8, scaleX:1, opacity:1, ease:Cubic.easeIn});
					TweenLite.to(f4bartxt1, .5, {delay:.8, opacity:1, ease:Cubic.easeIn});
					TweenLite.to(f4bartxt2, .5, {delay:1, opacity:1, ease:Cubic.easeIn});
				}
			}
			if(slidePos==4){
				TweenLite.set(infobtn, {visibility:'hidden'});
				TweenLite.set(reddot, {left:372});
				TweenLite.set(ctaarrow, {visibility:'visible', opacity:0});
				TweenLite.set(cta, {visibility:'visible', opacity:0});
				TweenLite.to(cta, .4, {opacity:1, delay:.4, ease:Cubic.easeIn});
				TweenLite.to(ctaarrow, .4, {opacity:1, delay:.4, ease:Cubic.easeIn});
				if(!frame5Done){
					frame5Done = true;
					TweenLite.set(txt5, {scaleX:3, scaleY:3, opacity:0});
					TweenLite.set(txt5b, {scaleX:3, scaleY:3, opacity:0});
					TweenLite.to(txt5, .5, {delay:.4, scaleX:1, scaleY:1, opacity:1, ease:Cubic.easeIn});
					TweenLite.to(txt5b, .5, {delay:.6, scaleX:1, scaleY:1, opacity:1, ease:Cubic.easeIn});
				}
			}
		}
	</script>
	<script type="text/javascript" charset="utf-8">
		setResponsiveBanner("container");
		
		function setResponsiveBanner(id){
			var responsiveAdaptation = "browserWidth";
			var transitionMode  = "invisible";
			bannerImg = document.getElementById(id);
			EB._listenToMessages = function(){
				EBG.log.debug("EB._listenToMessages");
				EBG.EventName["setBannerSize"] = "setBannerSize";

				for(var eventName in EBG.EventName){
					if(!EBG.EventName.hasOwnProperty(eventName))
				  		continue;
					eventName = EBG.EventName[eventName];
					EBG.log.debug("listening to event: {0}", eventName);
					EBG.pm.bind(eventName, this._handleEvents, this);
				}
			}

			EB._handleEvents = function(msgData, msgEvent){
				EBG.log.debug("EB._handleMessages");
				var data = JSON.parse(msgEvent.data);
				if (EBG.isGlobalDef("JSON"))
					EBG.log.debug("eventName={0}, data={1}", data.type, JSON.stringify(data));
				if(data && (data.type == "setBannerSize")){
					EB._adConfig.width = data.data.width;
					EB._adConfig.height = data.data.height;
					if(EB._adConfig.width < 1100){
						var centerWidth = (EB._adConfig.width-1100)/2;
						TweenLite.set(container, {left:centerWidth})
					}
					else {
						TweenLite.set(container, {left:0})
					}
				}
				this._dispatchEvent(data.type, data);
			}
			EB._listenToMessages();
			EB._sendMessage("responsiveAdaptation", { rule: responsiveAdaptation});
		}
	</script>
</body>
</html>
